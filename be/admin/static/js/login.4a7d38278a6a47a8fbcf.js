webpackJsonp([1],{"4puS":function(t,r){},MEnj:function(t,r,e){"use strict";var n=e("MFPv");function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError",t.exports=function(t,r){if("string"!=typeof t)throw new a("Invalid token specified");var e=!0===(r=r||{}).header?0:1;try{return JSON.parse(n(t.split(".")[e]))}catch(t){throw new a("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=a},MFPv:function(t,r,e){var n=e("ppYZ");t.exports=function(t){var r=t.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,function(t,r){var e=r.charCodeAt(0).toString(16).toUpperCase();return e.length<2&&(e="0"+e),"%"+e}))}(r)}catch(t){return n(r)}}},OaN3:function(t,r){},"T+/8":function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("lC5x"),s=e.n(a),o=e("J0Oq"),c=e.n(o),i=e("Yarq"),u=e.n(i),l=e("AA3o"),p=e.n(l),d=e("xSur"),f=e.n(d),v=e("UzKs"),h=e.n(v),w=e("Y7Ml"),g=e.n(w),m=e("VCXJ"),_=e("9ZwC"),b=e.n(_),y=e("hL+H"),k=e("MEnj"),C=b()({})(n=function(t){function r(){var t,e,n,a;p()(this,r);for(var s=arguments.length,o=Array(s),c=0;c<s;c++)o[c]=arguments[c];return e=n=h()(this,(t=r.__proto__||u()(r)).call.apply(t,[this].concat(o))),n.account="",n.password="",n.rules={account:[{required:!0,message:"账号不得为空",trigger:"blur"}],password:[{required:!0,message:"密码不得为空",trigger:"blur"},{min:5,max:16,message:"密码长度应在5到16之间",trigger:"blur"}]},a=e,h()(n,a)}return g()(r,t),f()(r,[{key:"login",value:function(){var t=c()(s.a.mark(function t(){var r,e,n=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={account:this.account,passwd:this.password},t.prev=1,t.next=4,y.a.login(r);case 4:e=t.sent,this.$store.dispatch("login",e.data).then(function(){var t=k(e.data);n.$store.dispatch("setUserInfo",t),n.$notify.success("欢迎登录",n.account);var r=n.$route.query&&n.$route.query.redirect||"";r?n.$router.replace(r):n.$router.replace("/dashboard")}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.$message.error(t.t0.message);case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}()}]),r}(m.default))||n,x={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"ta-login"},[e("div",{staticClass:"ta-login__container"},[e("ta-form",{staticClass:"ta-login__form",attrs:{rules:t.rules},on:{submit:function(r){t.login()}}},[e("h1",[t._v("系统登录")]),t._v(" "),e("ta-form-item",{attrs:{prop:"account",placeholder:"请输入帐号",rules:t.rules.account},model:{value:t.account,callback:function(r){t.account=r},expression:"account"}}),t._v(" "),e("ta-form-item",{attrs:{prop:"password",placeholder:"请输入密码",type:"password",rules:t.rules.password},model:{value:t.password,callback:function(r){t.password=r},expression:"password"}}),t._v(" "),e("ta-button",{staticClass:"btn-login"},[t._v("\n        登录\n      ")])],1),t._v(" "),e("div",{staticClass:"register"},[e("span",[t._v("没有帐号？")]),t._v(" "),e("router-link",{attrs:{to:"/register"}},[t._v("立即注册")])],1)],1),t._v(" "),e("ul",{staticClass:"ta-bubbles"},t._l(Array(10),function(t,r){return e("li",{key:t})}))])},staticRenderFns:[]};var E=e("Z0/y")(C,x,!1,function(t){e("4puS")},"data-v-212c9eb1",null);r.default=E.exports},bqOp:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("lC5x"),s=e.n(a),o=e("J0Oq"),c=e.n(o),i=e("Yarq"),u=e.n(i),l=e("AA3o"),p=e.n(l),d=e("xSur"),f=e.n(d),v=e("UzKs"),h=e.n(v),w=e("Y7Ml"),g=e.n(w),m=e("VCXJ"),_=e("9ZwC"),b=e.n(_),y=e("hL+H"),k=b()({})(n=function(t){function r(){var t,e,n,a;p()(this,r);for(var s=arguments.length,o=Array(s),c=0;c<s;c++)o[c]=arguments[c];return e=n=h()(this,(t=r.__proto__||u()(r)).call.apply(t,[this].concat(o))),n.account="",n.passwd="",n.passwdConfirm="",n.rules={account:[{required:!0,message:"账号不得为空",trigger:"blur"}],passwd:[{required:!0,message:"密码不得为空",trigger:"blur"},{min:5,max:16,message:"密码长度应在5到16之间",trigger:"blur"}]},a=e,h()(n,a)}return g()(r,t),f()(r,[{key:"checkSamePasswd",value:function(){return this.passwd!==this.passwdConfirm?new Error("两次输入密码不一致"):""}},{key:"checkAccountExist",value:function(){var t=c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y.a.checkAccountExist(this.account).then(function(t){return"no"===t.code?new Error(t.message):""}).catch(function(t){return t}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"register",value:function(){var t=c()(s.a.mark(function t(){var r=this;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:y.a.checkAccountExist(this.account).then(c()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y.a.register({account:r.account,passwd:r.passwd}));case 1:case"end":return t.stop()}},t,r)}))).then(function(){return r.account="",r.passwd="",r.passwdConfirm="",r.$confirm("您已注册成功，是否前往登录页","提示")}).then(function(){return r.login()}).catch(function(t){var e=t.message;e&&r.$message.error(e)});case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"login",value:function(){this.$router.replace("/login")}}]),r}(m.default))||n,C={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"ta-register"},[e("div",{staticClass:"ta-register__form-container"},[e("div",{staticClass:"panel"},[e("h2",[e("ta-icon",{attrs:{name:"person-add"}}),t._v(" "),e("span",[t._v("注册用户")])],1),t._v(" "),e("ta-form",{staticClass:"ta-register__form",attrs:{rules:t.rules},on:{submit:t.register}},[e("ta-form-item",{attrs:{validator:t.checkAccountExist,prop:"account",placeholder:"请输入帐号",rules:t.rules.account},model:{value:t.account,callback:function(r){t.account=r},expression:"account"}}),t._v(" "),e("ta-form-item",{attrs:{prop:"password",placeholder:"请输入密码",type:"password",rules:t.rules.passwd},model:{value:t.passwd,callback:function(r){t.passwd=r},expression:"passwd"}}),t._v(" "),e("ta-form-item",{attrs:{prop:"passwordConfirm",validator:t.checkSamePasswd,placeholder:"请再次输入密码",type:"password",rules:t.rules.passwd},model:{value:t.passwdConfirm,callback:function(r){t.passwdConfirm=r},expression:"passwdConfirm"}}),t._v(" "),e("ta-button",{staticClass:"ta-register__button"},[t._v("\n          注册\n        ")])],1),t._v(" "),e("div",{staticClass:"other"},[e("span",[t._v("已有帐号？")]),t._v(" "),e("router-link",{attrs:{to:"/login"}},[t._v("立即登录")])],1)],1),t._v(" "),e("ul",{staticClass:"ta-bubbles"},t._l(Array(10),function(t,r){return e("li",{key:t})}))])])},staticRenderFns:[]};var x=e("Z0/y")(k,C,!1,function(t){e("OaN3")},"data-v-0d894739",null);r.default=x.exports},ppYZ:function(t,r){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var r=String(t).replace(/=+$/,"");if(r.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var a,s,o=0,c=0,i="";s=r.charAt(c++);~s&&(a=o%4?64*a+s:s,o++%4)?i+=String.fromCharCode(255&a>>(-2*o&6)):0)s=e.indexOf(s);return i}}});
//# sourceMappingURL=login.4a7d38278a6a47a8fbcf.js.map