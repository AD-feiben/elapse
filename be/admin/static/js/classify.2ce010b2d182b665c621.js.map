{"version":3,"sources":["webpack:///src/views/classify/index.vue","webpack:///./src/views/classify/index.vue?55ad","webpack:///./src/views/classify/index.vue"],"names":["reset","_dec","_class","_Vue","_this","title","value","loading","rules","required","message","trigger","userId","_temp","possibleConstructorReturn_default","_ret","id","fetchClassify","this","test","classifyId","updateClassify","addClassify","res","vue_esm","classify","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","submit","$event","ok","prop","placeholder","name","model","callback","$$v","expression","_v","validator","isLetter","type","_s","tagId","staticRenderFns","Component","__webpack_require__","normalizeComponent","classify_Tag","ssrContext","__webpack_exports__"],"mappings":"2WAqCA,WAEAA,WALAC,CAAAC,EAAA,SAAAC,gMAWA,GAAAC,EAAAC,MACA,GAAAD,EAAAE,MACA,GAAAF,EAAAG,SACA,EAAAH,EAAAI,cAEAC,UAAA,EAAAC,QAAA,UAAAC,QAEA,iBACAF,UAAA,EAAAC,QAAA,UAAAC,QAGA,UAPAP,EAAAQ,OASA,KAAAC,EAAAC,IAAAV,EAAAW,mFAEA,6EAEAC,uBAEAA,OACAC,oDAKA,OAAAC,KACAZ,OAAA,eAAAa,KAAAD,KACAZ,OAIA,aAFA,+KASA,yCAEAc,yCACAf,mBAEAC,+EAEAI,gDAIA,kLAGAW,sBAEAC,yDAKA,cACA,uKAMA,mEAEAjB,iBACAC,kBAEAM,+CACAW,oBAEA,4EAEAb,gDAKA,iSAGA,+DACAE,8CACAW,QAEAvB,iFAEAU,gDAGA,sIAxGA,CAUAc,EAAA,WAAAtB,ECzCAuB,GADiBC,OAFjB,WAA0B,IAAAC,EAAAT,KAAaU,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,WAA+BE,YAAA,UAAAC,OAA6BzB,MAAAmB,EAAAnB,OAAkB0B,IAAKC,OAAA,SAAAC,GAA0BT,EAAAU,SAAWP,EAAA,gBAAqBG,OAAOK,KAAA,OAAAC,YAAA,SAAA/B,MAAAmB,EAAAnB,MAAAgC,MAA4DC,OAAQnC,MAAAqB,EAAA,MAAAe,SAAA,SAAAC,GAA2ChB,EAAAtB,MAAAsC,GAAcC,WAAA,WAAqBjB,EAAAkB,GAAA,KAAAf,EAAA,gBAAiCG,OAAOK,KAAA,QAAAC,YAAA,eAAA/B,MAAAmB,EAAAnB,MAAAF,MAAAwC,UAAAnB,EAAAoB,UAA6FN,OAAQnC,MAAAqB,EAAA,MAAAe,SAAA,SAAAC,GAA2ChB,EAAArB,MAAAqC,GAAcC,WAAA,WAAqBjB,EAAAkB,GAAA,KAAAf,EAAA,aAA8BG,OAAOe,KAAA,UAAAzC,QAAAoB,EAAApB,WAAwCoB,EAAAkB,GAAA,SAAAlB,EAAAsB,GAAAtB,EAAAuB,MAAA,gCAEtpBC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACA9B,GATA,EAVA,SAAA+B,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/classify.2ce010b2d182b665c621.js","sourcesContent":["<template>\n  <div>\n    <ta-form \n      class=\"ta-form\" \n      :rules=\"rules\"\n      @submit=\"ok()\">\n      <ta-form-item\n        prop=\"name\"\n        v-model=\"title\"\n        placeholder=\"请输入标签名\"\n        :rules=\"rules.name\">\n      </ta-form-item>\n      <ta-form-item\n        prop=\"value\"\n        v-model=\"value\"\n        placeholder=\"请输入标签值，仅接受英文\"\n        :rules=\"rules.value\"\n        :validator=\"isLetter\">\n      </ta-form-item>\n      <ta-button \n        type=\"primary\" \n        :loading=\"loading\">\n      {{ !!tagId ? '更新' : '提交' }}\n      </ta-button>\n    </ta-form>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\nimport { ClassifyProvider } from '@/provider/classify-provider'\n\n@Component({\n  watch: {\n    '$route'() {\n      const id = this.$route.params['classifyId'] || null\n      if (!id) {\n        this.reset()\n      }\n    }\n  },\n})\nexport default class Tag extends Vue {\n  tagId = ''\n  title = ''\n  value = ''\n  loading = false\n  rules = {\n    name:[\n      { required: true, message: '标签名不得为空', trigger: 'blur' },\n    ],\n    value: [\n      { required: true, message: '标签值不得为空', trigger: 'blur' },\n    ]\n  }\n  userId = ''\n\n  created() {\n    const id = this.$route.params['classifyId']\n    this.userId = JSON.parse(window.sessionStorage.getItem('userInfo')).id\n\n    if (id) {\n      this.classifyId = id\n      this.fetchClassify()\n    }\n  }\n\n  isLetter() {\n    if (\n      !this.value \n      || !(/^[a-zA-Z]*$/g).test(this.value)\n    ) {\n      return new Error('标签值仅接受英文')\n    } else {\n      return ''\n    }\n  }\n\n  async fetchClassify()  {\n    this.loading = true\n\n    try {\n      const res= await ClassifyProvider.getClassify(this.classifyId)\n      \n      this.title = res.title\n      this.value = res.value\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n\n  ok() {\n    if (this.classifyId) {\n      this.updateClassify()\n    } else {\n      this.addClassify()\n    }\n  }\n\n  reset() {\n    this.title = ''\n    this.value = ''\n  }\n\n  async updateClassify()  {\n    this.loading = true\n\n    try {\n      const res= await ClassifyProvider.updateClassify(this.classifyId, {\n        title: this.title, \n        value: this.value,\n        userId: this.userId\n      })\n      this.$message.success(res)\n      this.$router.go(-1)\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n\n  async addClassify()  {\n    this.loading = true\n\n    try {\n      const res= await ClassifyProvider.addClassify(this.title, this.value, this.userId)\n      this.$message.success(res)\n      this.reset()\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include b(form) {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 30px 15px;\n\n  button {\n    width: 100%;\n    margin-top: 22px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/classify/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ta-form',{staticClass:\"ta-form\",attrs:{\"rules\":_vm.rules},on:{\"submit\":function($event){_vm.ok()}}},[_c('ta-form-item',{attrs:{\"prop\":\"name\",\"placeholder\":\"请输入标签名\",\"rules\":_vm.rules.name},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),_vm._v(\" \"),_c('ta-form-item',{attrs:{\"prop\":\"value\",\"placeholder\":\"请输入标签值，仅接受英文\",\"rules\":_vm.rules.value,\"validator\":_vm.isLetter},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_vm._v(\" \"),_c('ta-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading}},[_vm._v(\"\\n    \"+_vm._s(!!_vm.tagId ? '更新' : '提交')+\"\\n    \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-1a761023\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/classify/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a761023\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/home/zhaoxu/repo/newton/personal/elapse/be/src/theme/index.scss\\\"]}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a761023\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1a761023\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/classify/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}