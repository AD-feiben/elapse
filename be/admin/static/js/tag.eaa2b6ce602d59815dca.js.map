{"version":3,"sources":["webpack:///src/views/tag/index.vue","webpack:///./src/views/tag/index.vue?904f","webpack:///./src/views/tag/index.vue"],"names":["reset","_dec","_class","_Vue","_this","newTagName","newTagValue","loading","rules","required","message","trigger","_temp","possibleConstructorReturn_default","_ret","id","fetchTag","this","test","tagId","title","value","updateTag","addTag","res","vue_esm","tag","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","submit","$event","ok","prop","placeholder","name","model","callback","$$v","expression","_v","validator","isLetter","type","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","tag_Tag","ssrContext","__webpack_exports__"],"mappings":"2XAqCA,WAEAA,WALAC,CAAAC,EAAA,SAAAC,gMAWA,GAAAC,EAAAC,WACA,GAAAD,EAAAE,YACA,GAAAF,EAAAG,SACA,EAAAH,EAAAI,cAEAC,UAAA,EAAAC,QAAA,UAAAC,QAEA,iBACAF,UAAA,EAAAC,QAAA,UAAAC,QAIA,YARAC,EAAAC,IAAAT,EAAAU,mFAUA,qBAEAC,OACAC,+CAKA,OAAAC,KACAX,aAAA,eAAAY,KAAAD,KACAX,aAIA,aAFA,0KASA,oCAEAa,yCACAC,yBAEAC,+EAEAX,gDAIA,6KAGAY,iBAEAC,yDAKA,oBACA,kKAMA,yDAEAlB,sBAEAC,oDACAkB,oBAEA,4EAEAd,gDAKA,4RAGA,oDACAJ,mDACAkB,QAEAxB,iFAEAU,gDAGA,sIApGA,CAUAe,EAAA,WAAAvB,ECzCAwB,GADiBC,OAFjB,WAA0B,IAAAC,EAAAX,KAAaY,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,WAA+BE,YAAA,UAAAC,OAA6B1B,MAAAoB,EAAApB,OAAkB2B,IAAKC,OAAA,SAAAC,GAA0BT,EAAAU,SAAWP,EAAA,gBAAqBG,OAAOK,KAAA,OAAAC,YAAA,SAAAhC,MAAAoB,EAAApB,MAAAiC,MAA4DC,OAAQrB,MAAAO,EAAA,WAAAe,SAAA,SAAAC,GAAgDhB,EAAAvB,WAAAuC,GAAmBC,WAAA,gBAA0BjB,EAAAkB,GAAA,KAAAf,EAAA,gBAAiCG,OAAOK,KAAA,QAAAC,YAAA,eAAAhC,MAAAoB,EAAApB,MAAAa,MAAA0B,UAAAnB,EAAAoB,UAA6FN,OAAQrB,MAAAO,EAAA,YAAAe,SAAA,SAAAC,GAAiDhB,EAAAtB,YAAAsC,GAAoBC,WAAA,iBAA2BjB,EAAAkB,GAAA,KAAAf,EAAA,aAA8BG,OAAOe,KAAA,UAAA1C,QAAAqB,EAAArB,WAAwCqB,EAAAkB,GAAA,SAAAlB,EAAAsB,GAAAtB,EAAAT,MAAA,gCAEvrBgC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACA7B,GATA,EAVA,SAAA8B,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/tag.eaa2b6ce602d59815dca.js","sourcesContent":["<template>\n  <div>\n    <ta-form \n      class=\"ta-form\" \n      :rules=\"rules\"\n      @submit=\"ok()\">\n      <ta-form-item\n        prop=\"name\"\n        v-model=\"newTagName\"\n        placeholder=\"请输入标签名\"\n        :rules=\"rules.name\">\n      </ta-form-item>\n      <ta-form-item\n        prop=\"value\"\n        v-model=\"newTagValue\"\n        placeholder=\"请输入标签值，仅接受英文\"\n        :rules=\"rules.value\"\n        :validator=\"isLetter\">\n      </ta-form-item>\n      <ta-button \n        type=\"primary\" \n        :loading=\"loading\">\n      {{ !!tagId ? '更新' : '提交' }}\n      </ta-button>\n    </ta-form>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport Component from 'vue-class-component'\nimport { TagProvider } from '@/provider/tag-provider'\n\n@Component({\n  watch: {\n    '$route'() {\n      const id = this.$route.params['tagId'] || null\n      if (!id) {\n        this.reset()\n      }\n    }\n  },\n})\nexport default class Tag extends Vue {\n  tagId = ''\n  newTagName = ''\n  newTagValue = ''\n  loading = false\n  rules = {\n    name:[\n      { required: true, message: '标签名不得为空', trigger: 'blur' },\n    ],\n    value: [\n      { required: true, message: '标签值不得为空', trigger: 'blur' },\n    ]\n  }\n\n  created() {\n    const id = this.$route.params['tagId']\n    if (id) {\n      this.tagId = id\n      this.fetchTag()\n    }\n  }\n\n  isLetter() {\n    if (\n      !this.newTagValue \n      || !(/^[a-zA-Z]*$/g).test(this.newTagValue)\n    ) {\n      return new Error('标签值仅接受英文')\n    } else {\n      return ''\n    }\n  }\n\n  async fetchTag()  {\n    this.loading = true\n\n    try {\n      const res= await TagProvider.getTag(this.tagId)\n      \n      this.newTagName = res.title\n      this.newTagValue = res.value\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n\n  ok() {\n    if (this.tagId) {\n      this.updateTag()\n    } else {\n      this.addTag()\n    }\n  }\n\n  reset() {\n    this.newTagName = ''\n    this.newTagValue = ''\n  }\n\n  async updateTag()  {\n    this.loading = true\n\n    try {\n      const res= await TagProvider.updateTag(this.tagId, {\n        title: this.newTagName, \n        value: this.newTagValue\n      })\n      this.$message.success(res)\n      this.$router.go(-1)\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n\n  async addTag()  {\n    this.loading = true\n\n    try {\n      const res= await TagProvider.addTag(this.newTagName, this.newTagValue)\n      this.$message.success(res)\n      this.reset()\n    } catch (err) {\n      this.$message.error(err.message)\n    } finally {\n      this.loading = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@include b(form) {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 30px 15px;\n\n  button {\n    width: 100%;\n    margin-top: 22px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/tag/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('ta-form',{staticClass:\"ta-form\",attrs:{\"rules\":_vm.rules},on:{\"submit\":function($event){_vm.ok()}}},[_c('ta-form-item',{attrs:{\"prop\":\"name\",\"placeholder\":\"请输入标签名\",\"rules\":_vm.rules.name},model:{value:(_vm.newTagName),callback:function ($$v) {_vm.newTagName=$$v},expression:\"newTagName\"}}),_vm._v(\" \"),_c('ta-form-item',{attrs:{\"prop\":\"value\",\"placeholder\":\"请输入标签值，仅接受英文\",\"rules\":_vm.rules.value,\"validator\":_vm.isLetter},model:{value:(_vm.newTagValue),callback:function ($$v) {_vm.newTagValue=$$v},expression:\"newTagValue\"}}),_vm._v(\" \"),_c('ta-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading}},[_vm._v(\"\\n    \"+_vm._s(!!_vm.tagId ? '更新' : '提交')+\"\\n    \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-2dda026a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/tag/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2dda026a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!sass-resources-loader?{\\\"resources\\\":[\\\"/home/zhaoxu/repo/newton/personal/elapse/be/src/theme/index.scss\\\"]}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2dda026a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2dda026a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/tag/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}